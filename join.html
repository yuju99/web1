<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./global.css" />
    <style>
      a {
        text-decoration: none;
      }

      .all {
        justify-content: center;
        height: 100vh;
        align-items: center;
        display: flex;
        flex-direction: column;
        background: linear-gradient(white, white, white, white, #e3f2fd);
      }

      .behind {
        box-shadow: 1px 5px 5px gray;
        padding: 24px;
        background-color: #b9e0fd;
        border-radius: 20px;
      }

      .front {
        padding: 32px;
        border-radius: 20px;
        background-color: aliceblue;
      }

      .condition {
        text-align: right;
        display: flex;
        flex-direction: column;
        gap: 4px;
        font-size: 16px;
      }

      .values {
        text-align: start;
      }

      .values > label {
        font-size: 18px;
        margin-right: 8px;
      }

      .values span {
        font-size: 18px;
        margin-right: 8px;
      }

      .id {
        width: 80%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .duplication {
        padding: 5px 3px;
        border-radius: 4px;
        font-size: 13px;
        display: inline;
        background-color: rgba(238, 238, 238, 0.522);
        box-shadow: 1px 2px 2px gray;
        border: none;
        margin-left: 2px;
      }

      .password {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .email {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .name {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .birthday {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        font-weight: bold;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .mobile {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .gender {
        width: 100%;
        display: inline-block;
        text-align: start;
      }

      #tel {
        width: 100%;
        background-color: #ffffff;
        border-radius: 4px;
        border: none;
        font-weight: bold;
        padding: 6px 8px;
        box-shadow: 1px 2px 2px gray;
      }

      .submit-box {
        width: 32%;
        height: 28px;
      }

      .submit {
        display: block;
        width: 100%;
        color: black;
        text-decoration: none;
        height: 28px;
        border-radius: 8px;
        border: none;
        font-weight: bold;
        font-size: 17px;
        margin-right: 4px;
        box-shadow: 1px 2px 2px gray;
        background-color: #b9e0fd;
        text-align: center;
      }

      .reset {
        width: 32%;
        height: 28px;
        border-radius: 4px;
        border: none;
        border: 1px solid black;
      }

      .main {
        border-radius: 4px;
        padding: 2px 4px;
        width: 32%;
        height: 28px;
        text-align: center;
        background-color: #f0f0f0;
        text-decoration: none;
        color: black;
        border: 1px solid black;
      }
      .form-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 32px;
      }
    </style>
  </head>
  <body>
    <nav class="nav">
      <ul class="atag-list">
        <li><a href="./school.html">HOME</a></li>
        <li><a href="./main.html">자기소개</a></li>
        <li class="current-page"><a href="#">회원가입</a></li>
        <li class="user"><a href="./account.html">회원정보</a></li>
        <li><a href="./event.html">이벤트 목록</a></li>
      </ul>
    </nav>
    <div class="all">
      <div class="behind">
        <div class="front">
          <form action="./account.html" class="values">
            <label for="id">아이디</label>
            <input
              type="text"
              placeholder="아이디"
              id="id"
              name="id"
              class="id"
            />
            <p class="duplication">중복확인</p>
            <br /><br />
            <label for="password">비밀번호</label>
            <input
              type="password"
              placeholder="비밀번호"
              id="password"
              class="password"
            /><br /><br />
            <label for="email">이메일</label>
            <input
              type="email"
              placeholder="이메일"
              id="email"
              class="email"
            /><br /><br />
            <label for="name">이름</label>
            <input
              type="text"
              placeholder="이름"
              id="name"
              class="name"
            /><br /><br />
            <label for="birthday">생년월일</label>
            <input
              type="date"
              placeholder="birthday"
              id="birthday"
              class="birthday"
            /><br /><br />

            <span for="id">성별</span>
            <span class="gender">
              <input type="radio" id="male" name="option" value="남자" />
              <label for="male">남자</label>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <input type="radio" id="female" name="option" value="여자" />
              <label for="female">여자</label>
            </span>

            <br /><br />
            <span for="birthday">통신사</span>

            <select name="mobile" class="mobile" id="mobile">
              <option name="mobile" value="SKT">SKT</option>
              <option name="mobile" value="KT">KT</option>
              <option name="mobile" value="LG U+">LG U+</option>
              <option name="mobile" value="알뜰폰">알뜰폰</option>
            </select>
            <br />
            <br />

            <label for="tel">전화번호</label>
            <input
              type="tel"
              placeholder="예: 010-1234-5678"
              name="tel"
              id="tel"
            />
            <br />

            <div class="form-bottom">
              <div class="submit-box">
                <a href="./account.html">
                  <input class="submit" type="submit" value="완료" />
                </a>
              </div>
              <input type="reset" value="초기화" class="reset" />
            </div>
          </form>
        </div>
      </div>
    </div>
    <script>
      const form = document.querySelector("form");
      const duplication = document.querySelector(".duplication");

      const id = document.getElementById("id");
      const pw = document.getElementById("password");
      const email = document.getElementById("email");
      const name = document.getElementById("name");
      const birthday = document.getElementById("birthday");
      const gender = document.querySelectorAll(".gender > input");
      const mobile = document.getElementById("mobile");
      const tel = document.getElementById("tel");

      const user = document.querySelector(".user");

      user.addEventListener("click", (event) => {
        const localId = window.localStorage.getItem("ID") || "";

        if (localId == "") {
          event.preventDefault();
          alert("회원가입을 해주세요.");
        }
      });

      form.addEventListener("submit", (event) => {
        const selectedMobile = mobile.options[mobile.selectedIndex].value;

        let checkedGender = "";
        for (let item of gender) {
          if (item.checked) {
            checkedGender = item.value;
          }
        }

        if (
          id.value.trim() === "" ||
          pw.value.trim() === "" ||
          email.value.trim() === "" ||
          name.value.trim() === "" ||
          birthday.value === "" ||
          checkedGender === "" ||
          selectedMobile === "" ||
          selectedMobile === undefined
        ) {
          alert("모든 값을 입력해주세요");
          event.preventDefault();
          return;
        }

        // localStorage 저장
        window.localStorage.setItem("ID", id.value);
        window.localStorage.setItem("PASSWORD", pw.value);
        window.localStorage.setItem("EMAIL", email.value);
        window.localStorage.setItem("NAME", name.value);
        window.localStorage.setItem("BIRTHDAY", birthday.value);
        window.localStorage.setItem("GENDER", checkedGender);
        window.localStorage.setItem("MOBILE", selectedMobile);
        window.localStorage.setItem("TEL", tel.value);
      });

      duplication.addEventListener("click", () => {
        const check = window.localStorage.getItem("ID");

        if (id.value.trim() == "") {
          alert("아이디를 입력해주세요.");
          return;
        }

        if (check == id.value) {
          alert("중복된 아이디입니다.");
          id.value = "";
        } else {
          alert("사용 가능한 아이디입니다.");
        }
      });

      form.addEventListener("reset", (event) => {
        const check = confirm("초기화 하시겠습니까?");

        if (!check) {
          event.preventDefault();
        }
      });

      mobile.addEventListener("change", (e) => {
        const selectedMobile = mobile.options[mobile.selectedIndex].value;

        alert(selectedMobile + " 통신사를 선택하셨습니다.");
      });
    </script>
  </body>
</html>
